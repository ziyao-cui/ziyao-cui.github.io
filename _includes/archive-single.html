{% include base_path %}

{%- comment -%}
Simplified publication item:
 - Title links to paperurl if present; otherwise plain text (no permalink to project page)
 - Only shows PDF and BibTeX links (no Website, no Abstract)
 - Year appended to venue only if category == "published"
 - Usage: {% include archive-single.html post=post %} or used inside a loop
{%- endcomment -%}

{%- assign p = include.post | default: post -%}

{%- if p.id %}
  {% assign title_text = p.title | markdownify | remove: "<p>" | remove: "</p>" %}
{% else %}
  {% assign title_text = p.title %}
{% endif %}

<article class="archive__item pub-row" itemscope itemtype="http://schema.org/CreativeWork">

  <!-- Meta -->
  <div class="pub-meta">
    <h3 class="pub-title" itemprop="headline">
      {% if p.paperurl %}
        <!-- <a href="{{ p.paperurl }}" target="_blank" rel="noopener noreferrer">{{ title_text }}</a> -->
        {{ title_text }}
      {% else %}
        {{ title_text }}
      {% endif %}
    </h3>

    {% if p.citation %}
      <div class="pub-citation">{{ p.citation }}</div>
    {% endif %}

    {% if p.venue %}
      <div class="pub-venue">
        <i>{{ p.venue }}</i>
      </div>
    {% elsif p.date %}
      <div class="pub-venue">{% if p.category == "published" %}{{ p.date | date: "%Y" }}{% endif %}</div>
    {% endif %}
  </div>

  <!-- Actions (buttons underneath) -->
  <div class="pub-actions">
    <div class="pub-links">
      {% if p.paperurl %}
        <a class="pub-link" href="{{ p.paperurl }}" target="_blank" style="text-decoration: none;" rel="noopener noreferrer">PDF</a>
      {% endif %}
      {% if p.slidesurl %}
        <a class="pub-link" href="{{ p.slidesurl }}" target="_blank" style="text-decoration: none;" rel="noopener noreferrer">Abstract</a>
      {% endif %}
      {% if p.bibtexurl %}
        <a class="pub-link" href="{{ p.bibtexurl }}" target="_blank" style="text-decoration: none;" rel="noopener noreferrer">BibTeX</a>
      {% endif %}
    </div>
  </div>

</article>
